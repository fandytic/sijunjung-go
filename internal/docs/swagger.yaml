basePath: /
definitions:
  http.APIErrorResponse:
    description: Standard API error response
    properties:
      code:
        example: 400
        type: integer
      message:
        example: invalid request
        type: string
      success:
        example: false
        type: boolean
    type: object
  http.APIResponse:
    description: Standard API response
    properties:
      code:
        example: 200
        type: integer
      data:
        type: object
      message:
        example: operation successful
        type: string
      success:
        example: true
        type: boolean
    type: object
  http.FacebookAuthData:
    description: Facebook auth data
    properties:
      is_new_user:
        example: true
        type: boolean
      token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
    type: object
  http.GoogleAuthData:
    description: Google auth data
    properties:
      is_new_user:
        example: true
        type: boolean
      token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
    type: object
  http.SijunjungData:
    description: Sijunjung service data
    properties:
      status:
        example: running
        type: string
    type: object
  http.TokenData:
    description: Token data
    properties:
      token:
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
    type: object
  http.UserData:
    description: User data
    properties:
      user_id:
        example: 507f1f77bcf86cd799439011
        type: string
    type: object
  model.FacebookAuthRequest:
    description: Request body for Facebook authentication
    properties:
      access_token:
        example: EAABsbCS1...
        type: string
    type: object
  model.LoginRequest:
    description: Request body for user login
    properties:
      email:
        example: sijunjunggo@gmail.com
        type: string
      password:
        example: password123
        type: string
    type: object
  model.RegisterRequest:
    description: Request body for user registration
    properties:
      email:
        example: sijunjunggo@gmail.com
        type: string
      full_name:
        example: Sijunjung Go
        type: string
      password:
        example: password123
        type: string
    type: object
  model.ResendOTPRequest:
    description: Request body for resending OTP
    properties:
      email:
        example: sijunjunggo@gmail.com
        type: string
    type: object
  model.ResetPasswordRequest:
    description: Request body for password reset
    properties:
      email:
        example: sijunjunggo@gmail.com
        type: string
    type: object
  model.VerifyOTPRequest:
    description: Request body for OTP verification
    properties:
      code:
        example: "5318"
        type: string
      email:
        example: sijunjunggo@gmail.com
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: API for Sijunjung Go application with authentication support
  title: Sijunjung Go API
  version: "1.0"
paths:
  /api/auth/facebook:
    post:
      consumes:
      - application/json
      description: Authenticate or register user with Facebook access token
      parameters:
      - description: Facebook auth request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.FacebookAuthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Authentication successful
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/http.FacebookAuthData'
              type: object
        "400":
          description: Invalid Facebook token
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      summary: Authenticate with Facebook
      tags:
      - auth
  /api/auth/google:
    get:
      description: Redirects user to Google OAuth consent page for login/registration
      parameters:
      - description: State parameter for CSRF protection
        in: query
        name: state
        type: string
      responses:
        "302":
          description: Redirect to Google OAuth
      summary: Redirect to Google OAuth
      tags:
      - auth
  /api/auth/google/callback:
    get:
      description: Handle callback from Google OAuth and return JWT token
      parameters:
      - description: Authorization code from Google
        in: query
        name: code
        required: true
        type: string
      - description: State parameter for CSRF protection
        in: query
        name: state
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Authentication successful
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/http.GoogleAuthData'
              type: object
        "400":
          description: Invalid authorization code
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      summary: Google OAuth callback
      tags:
      - auth
  /api/login:
    post:
      consumes:
      - application/json
      description: Authenticate user with email and password to get bearer token
      parameters:
      - description: Login request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/http.TokenData'
              type: object
        "400":
          description: Invalid request body
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
        "401":
          description: Invalid credentials
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      summary: Login user
      tags:
      - auth
  /api/logout:
    post:
      description: Revoke the current bearer token
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: Invalid or missing token
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      security:
      - BearerAuth: []
      summary: Logout user
      tags:
      - auth
  /api/me:
    get:
      description: Get the current authenticated user information
      produces:
      - application/json
      responses:
        "200":
          description: Current user info
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/http.UserData'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - auth
  /api/register:
    post:
      consumes:
      - application/json
      description: Register a new user with full name, email, and password. Sends
        OTP to email for verification.
      parameters:
      - description: Registration request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User created and OTP sent
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: Invalid request or email already exists
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      summary: Register a new user
      tags:
      - auth
  /api/resend-otp:
    post:
      consumes:
      - application/json
      description: Resend the OTP code to email (1 minute cooldown)
      parameters:
      - description: Resend OTP request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.ResendOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OTP resent successfully
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: User not found or cooldown active
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
        "429":
          description: Please wait before requesting new code
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      summary: Resend OTP code
      tags:
      - auth
  /api/reset-password:
    post:
      consumes:
      - application/json
      description: Reset password by sending a new random password to user's email
      parameters:
      - description: Reset password request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: New password sent to email
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: User not found or invalid request
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      summary: Reset password
      tags:
      - auth
  /api/sijunjung:
    get:
      description: Check if Sijunjung service is running
      produces:
      - application/json
      responses:
        "200":
          description: Service is running
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/http.SijunjungData'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      security:
      - BearerAuth: []
      summary: Check Sijunjung service
      tags:
      - sijunjung
  /api/verify-otp:
    post:
      consumes:
      - application/json
      description: Verify the OTP code sent to email and get bearer token
      parameters:
      - description: Verify OTP request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/model.VerifyOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Verification successful
          schema:
            allOf:
            - $ref: '#/definitions/http.APIResponse'
            - properties:
                data:
                  $ref: '#/definitions/http.TokenData'
              type: object
        "400":
          description: Invalid or expired code
          schema:
            $ref: '#/definitions/http.APIErrorResponse'
      summary: Verify OTP code
      tags:
      - auth
securityDefinitions:
  BearerAuth:
    description: 'Enter your bearer token in the format: Bearer {token}'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
